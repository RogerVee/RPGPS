<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 0 setup 
global.step =0;
npclist_scr();//gen master npc list 
img_ary_scr()
globalvar Xs, Ys,dam,Lx,Ly,allFalling
global.grab =0;
global.rmcnt=0;//how many rooms 
global.holdtime =5*60 //time for holding rune

var inst,inthit,pick,grabx,graby,hitx,hity;

Lx=room_width-84
Ly= room_height-240///room hegightfor testingh room_height
allFaling=0
dam=0;
Xs=120;
Ys=120;
rm_scr(global.rmcnt)
/// hp set up 

global.hp =100*global.lvl
global.maxhp=global.hp
global.temphp =global.hp


//enct_scr();
//global.npccnt=1;//max npcs in encounter 
////////////////////setup dam array 
  for (i=0;i&lt;6;i++)
        {
       global.damt[i]=0
        
        }
      
//damt 0  = pink    
//damt 1    black
//damt 2    green
//damt 3    red
//damt 4    blue
//damt 5    white
//damt 6
        
//////////////////


fill_scr();
while check_scr()&gt;0{
    with(rune_obj){
        if matched &gt;2{
            type=irandom(5)
            sprite_index=global.imageArray[type];
            matched=0
            }
    
    }
}
global.step=1

//surface_resize(application_suface)
/*var base_w = 768;
var base_h = 1024;
var max_w = display_get_width();
var max_h = display_get_height();
var aspect = display_get_width() / display_get_height();

    // portait
    var VIEW_WIDTH = min(base_w, max_w);
    var VIEW_HEIGHT = VIEW_WIDTH / aspect;


view_wview[0] = floor(VIEW_WIDTH);
view_hview[0] = floor(VIEW_HEIGHT);
view_wport[0] = max_w;
view_hport[0] = max_h;

surface_resize(application_surface, view_wview[0], view_hview[0]);


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///timmer for 4 - 5 step for animation of boards

if global.step=4 global.step =5
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///pause befor checking for more matches controled by fill step.


check_scr()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// checking for falling objs  ""step 1""
if global.step=3{
global.allFalling =0// if falling step 
with(rune_obj)
    {if global.allFalling=0   // check with all runes to see if any are falling 
    global.allFalling=falling    
    }
    if global.allFalling =0 global.step=3.5
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 1 idle
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 2 rune move


if global.grab =1
{inthit =instance_position(pick.x,pick.y, rune_obj);
    if (inthit!=noone &amp;&amp; inthit!=inst)
    {
    move_scr(inst,inthit)
     global.step=2//if colison change step
    }
      }   
      
      
      
if global.hp &gt; global.temphp global.hp-= (global.maxhp / 300)//abs(global.hp - global.temphp)/60// hp animation
      
  
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Step 3 Check for matches 
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 4 fall 
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 5 fill loop to step 3
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step3 fill 
if global.step=3.5  {

    fill_scr()//fill the empty spaces and come back 
    global.step=3.6
    if alarm_get(0)= -1 alarm[0]=15 //
  
    }





    
 ///fill and check 
 /*if global.step=1{
 if instance_number(rune_obj)&lt;36{
     for (i =0; i &lt;6;i++)
    {if !instance_position(Xs+(i*128),572,gem_obj){
    instance_create(Xs+(i*128),572-1,gem_obj)}
    }
    
    }
    if alarm_get(0)= -1 alarm[0]=30  }
    
  
     
      
       
       
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 6 damage turn 
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>////damage/health 3.6

  //Damage
  var i
    if global.step=3.6{
   with rune_obj{
    if image_alpha &gt; .5 {image_alpha-=.05}else global.step=4
    //if image_alpha&lt;.5 depth=5
    }}
    
    if global.step=4{
    
        // if there are matching gems 
                for(i=1;i&lt;6;i++){ //check all damage types for values
                with (npc_obj){
                temphp-=global.damt[i]*def[i]} //reduce health
               global.damt[i]=0     }     //set dam back to zero}
        
       global.temphp+=(global.damt[0]*2.5)
       if (global.hp &gt; global.maxhp){global.hp=global.maxhp}
       global.damt[0]=0
       global.step =4
        if alarm[1] = -1 alarm[1] = 30  // fill/check/dam reset give too npc
          
     }
     
     
     
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 5 NPC turn 
if global.step=5{ 
    with rune_obj{
    image_alpha=1
    depth=-1}
    with (npc_obj){
    trn-=1//step the npcs turn
        if trn&lt;1{global.temphp-=atk//if its its turn attack 
         trn= spd}}//if attacked return turn count to normal.
         global.step=1}//move faze
         
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///room progress or end 
if instance_number(npc_obj)&lt;1{
    
    if global.rmcnt&lt;global.list{
       global.rmcnt+=1
       rm_scr(global.rmcnt)
    
   } else {room_goto_previous()}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if global.step =2{
global.grab =0;
*/

if inst != noone
{
inst.image_alpha=1
}


//}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///step 2
        
        if global.step = 1{  // if in fill damage or check state exit 
        
            inst = instance_position(mouse_x, mouse_y, rune_obj);
        
                if inst != noone 
                {
                inst.image_alpha=.5
                
                pick = instance_create(x,y,pick_obj)
                pick.sprite_index = inst.sprite_index
                pick.image_xscale=1.1
                pick.image_yscale=1.1
                global.grab =1;
               
                }
        }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_text(400,400,global.step)

draw_healthbar(5,5,room_width-5,10,(global.hp/global.maxhp)*100,c_black, c_red, c_red, 0, true, true)
draw_healthbar(5,5,room_width-5,10,(global.temphp/global.maxhp)*100,c_black, c_red, c_lime, 0, false, true)
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
